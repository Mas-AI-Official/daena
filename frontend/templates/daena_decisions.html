{% extends "base.html" %}

{% block title %}Daena Decisions - Daena VP{% endblock %}

{% block head %}
<style>
    .decisions-container {
        padding: 30px;
        max-width: 1400px;
        margin: 0 auto;
    }

    .decisions-list {
        display: flex;
        flex-direction: column;
        gap: 16px;
        margin-top: 24px;
    }

    .decision-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 24px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .decision-card:hover {
        border-color: var(--daena-gold);
        transform: translateX(4px);
    }

    .decision-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 12px;
    }

    .decision-title {
        font-size: 18px;
        font-weight: 600;
        color: white;
        margin-bottom: 4px;
    }

    .decision-status {
        padding: 6px 12px;
        border-radius: 12px;
        font-size: 11px;
        font-weight: 600;
    }

    .status-pending {
        background: rgba(245, 158, 11, 0.2);
        color: #F59E0B;
    }

    .status-approved {
        background: rgba(34, 197, 94, 0.2);
        color: #22C55E;
    }

    .status-rejected {
        background: rgba(239, 68, 68, 0.2);
        color: #EF4444;
    }

    .decision-meta {
        display: flex;
        gap: 24px;
        font-size: 12px;
        color: #9CA3AF;
    }
</style>
{% endblock %}

{% block content %}
<div class="decisions-container">
    <div class="page-header">
        <h1>Daena Decisions</h1>
        <p style="color: #9CA3AF;">Autonomous decision log and approval queue</p>
    </div>

    <div class="decisions-list" id="decisions-list">
        <div style="text-align: center; padding: 60px;">
            <i class="fas fa-spinner fa-spin" style="font-size: 32px; color: var(--daena-gold);"></i>
            <p style="margin-top: 16px; color: #9CA3AF;">Loading decisions...</p>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    async function loadDecisions() {
        const list = document.getElementById('decisions-list');

        // Mock decisions - integrate with actual API
        const decisions = [
            { id: 1, title: 'Approve hiring new Sales Agent', status: 'pending', department: 'Sales', date: '2026-01-06' },
            { id: 2, title: 'Deploy new product feature', status: 'approved', department: 'Product', date: '2026-01-05' },
            { id: 3, title: 'Budget increase for Marketing', status: 'pending', department: 'Marketing', date: '2026-01-04' }
        ];

        if (decisions.length === 0) {
            list.innerHTML = '<div style="text-align: center; padding: 60px; color: #9CA3AF;">No decisions found</div>';
            return;
        }

        list.innerHTML = decisions.map(d => `
        <div class="decision-card" onclick="viewDecision(${d.id})">
            <div class="decision-header">
                <div>
                    <div class="decision-title">${d.title}</div>
                    <div class="decision-meta">
                        <span><i class="fas fa-building"></i> ${d.department}</span>
                        <span><i class="fas fa-calendar"></i> ${d.date}</span>
                    </div>
                </div>
                <span class="decision-status status-${d.status}">${d.status.toUpperCase()}</span>
            </div>
        </div>
    `).join('');
    }

    function viewDecision(id) {
        window.location.href = `/ui/decisions/${id}`;
    }

    document.addEventListener('DOMContentLoaded', loadDecisions);
</script>
{% endblock %}