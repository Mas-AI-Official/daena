{% extends "base.html" %}

{% block title %}Agent Details - Daena VP{% endblock %}

{% block head %}
<style>
    .agent-container {
        padding: 24px;
        max-width: 1200px;
        margin: 0 auto;
    }

    .agent-header {
        display: flex;
        align-items: center;
        gap: 24px;
        margin-bottom: 32px;
    }

    .back-btn {
        width: 40px;
        height: 40px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        text-decoration: none;
        transition: all 0.3s;
    }

    .back-btn:hover {
        background: var(--daena-gold);
        color: black;
    }

    .agent-avatar {
        width: 80px;
        height: 80px;
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
        font-weight: 700;
        color: white;
    }

    .agent-info h1 {
        font-size: 28px;
        font-weight: 700;
        color: white;
        margin-bottom: 4px;
    }

    .agent-role {
        color: var(--daena-gold);
        font-size: 16px;
        margin-bottom: 4px;
    }

    .agent-dept {
        color: #9CA3AF;
        font-size: 14px;
    }

    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 12px;
        margin-left: auto;
    }

    .status-badge.online {
        background: rgba(50, 205, 50, 0.2);
        color: #32CD32;
    }

    .status-badge.busy {
        background: rgba(255, 140, 0, 0.2);
        color: #FF8C00;
    }

    .content-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 24px;
    }

    .card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        padding: 24px;
    }

    .card-title {
        font-size: 16px;
        font-weight: 600;
        color: white;
        margin-bottom: 16px;
    }

    .stats-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 16px;
        margin-bottom: 24px;
    }

    .stat-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 20px;
        text-align: center;
    }

    .stat-value {
        font-size: 24px;
        font-weight: 700;
        color: white;
    }

    .stat-label {
        font-size: 12px;
        color: #9CA3AF;
        margin-top: 4px;
    }

    .task-list {
        display: flex;
        flex-direction: column;
        gap: 12px;
    }

    .task-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: rgba(255, 255, 255, 0.03);
        border-radius: 10px;
    }

    .task-status {
        width: 10px;
        height: 10px;
        border-radius: 50%;
    }

    .task-status.completed {
        background: #32CD32;
    }

    .task-status.in-progress {
        background: #FF8C00;
    }

    .task-status.pending {
        background: #9CA3AF;
    }

    .task-info {
        flex: 1;
    }

    .task-name {
        font-size: 14px;
        color: white;
    }

    .task-time {
        font-size: 11px;
        color: #9CA3AF;
    }

    .chat-input-area {
        display: flex;
        gap: 10px;
        margin-top: 16px;
    }

    .chat-input {
        flex: 1;
        padding: 12px 16px;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: white;
        font-size: 14px;
    }

    .chat-input:focus {
        outline: none;
        border-color: var(--daena-gold);
    }

    .send-btn {
        padding: 12px 20px;
        border-radius: 10px;
        background: var(--daena-gold);
        color: black;
        font-weight: 600;
        border: none;
        cursor: pointer;
    }

    .capability-list {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
    }

    .capability-tag {
        padding: 6px 12px;
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 20px;
        font-size: 12px;
        color: #9CA3AF;
    }

    .glass-btn {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.1);
        cursor: pointer;
        transition: all 0.3s;
    }

    .glass-btn:hover {
        background: rgba(212, 175, 55, 0.1);
        border-color: var(--daena-gold);
    }

    @media (max-width: 900px) {
        .content-grid {
            grid-template-columns: 1fr;
        }

        .stats-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="agent-container">
    <div class="agent-header">
        <a href="/ui/agents" class="back-btn"><i class="fas fa-arrow-left"></i></a>
        <div class="agent-avatar" id="agent-avatar" style="background: #4169E1;">AC</div>
        <div class="agent-info">
            <h1 id="agent-name">Alex CodeMaster</h1>
            <div class="agent-role" id="agent-role">Advisor A</div>
            <div class="agent-dept" id="agent-dept">Engineering Department</div>
        </div>
        <div class="status-badge online" id="agent-status">
            <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
            Online
        </div>
    </div>

    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value" style="color: #32CD32;" id="efficiency">96.50%</div>
            <div class="stat-label">Efficiency</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="tasks-completed">127</div>
            <div class="stat-label">Tasks Done</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: #00CED1;" id="response-time">0.85s</div>
            <div class="stat-label">Avg Response</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" style="color: var(--daena-gold);" id="uptime">99.80%</div>
            <div class="stat-label">Uptime</div>
        </div>
    </div>

    <div class="content-grid">
        <div class="card">
            <div class="card-title">Recent Tasks</div>
            <div class="task-list" id="task-list">
                <div class="task-item">
                    <div class="task-status completed"></div>
                    <div class="task-info">
                        <div class="task-name">Review code PR #1247</div>
                        <div class="task-time">Completed 2 hours ago</div>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-status in-progress"></div>
                    <div class="task-info">
                        <div class="task-name">Debug authentication issue</div>
                        <div class="task-time">In progress - 45 min</div>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-status pending"></div>
                    <div class="task-info">
                        <div class="task-name">Update API documentation</div>
                        <div class="task-time">Queued</div>
                    </div>
                </div>
                <div class="task-item">
                    <div class="task-status completed"></div>
                    <div class="task-info">
                        <div class="task-name">Deploy v2.3.1 to staging</div>
                        <div class="task-time">Completed 5 hours ago</div>
                    </div>
                </div>
            </div>
        </div>

        <div style="display: flex; flex-direction: column; gap: 24px;">
            <div class="card">
                <div class="card-title">Chat with Agent</div>
                <div id="agent-chat"
                    style="min-height: 150px; max-height: 200px; overflow-y: auto; margin-bottom: 10px;">
                    <p style="color: #9CA3AF; font-size: 13px;">Send a message to communicate directly with this agent.
                    </p>
                </div>
                <div class="chat-input-area">
                    <input type="text" class="chat-input" id="agent-message" placeholder="Ask the agent...">
                    <button class="send-btn" onclick="sendAgentMessage()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Capabilities</div>
                <div class="capability-list" id="capability-list">
                    <span class="capability-tag">Code Review</span>
                    <span class="capability-tag">Architecture Design</span>
                    <span class="capability-tag">Bug Analysis</span>
                    <span class="capability-tag">Performance Optimization</span>
                    <span class="capability-tag">API Development</span>
                    <span class="capability-tag">Testing</span>
                </div>
            </div>

            <div class="card">
                <div class="card-title">Quick Actions</div>
                <div style="display: flex; flex-direction: column; gap: 8px;">
                    <button class="glass-btn" onclick="assignNewTask()"
                        style="padding: 10px; border-radius: 8px; color: white; text-align: left;">
                        <i class="fas fa-play text-green-400 mr-2"></i> Assign New Task
                    </button>
                    <button class="glass-btn" onclick="viewPerformance()"
                        style="padding: 10px; border-radius: 8px; color: white; text-align: left;">
                        <i class="fas fa-chart-line text-blue-400 mr-2"></i> View Performance
                    </button>
                    <button class="glass-btn" onclick="configureAgent()"
                        style="padding: 10px; border-radius: 8px; color: white; text-align: left;">
                        }

                        .task-info {
                        flex: 1;
                        }

                        .task-name {
                        font-size: 14px;
                        color: white;
                        }

                        .task-time {
                        font-size: 11px;
                        color: #9CA3AF;
                        }

                        .chat-input-area {
                        display: flex;
                        gap: 10px;
                        margin-top: 16px;
                        }

                        .chat-input {
                        flex: 1;
                        padding: 12px 16px;
                        border-radius: 10px;
                        background: rgba(255, 255, 255, 0.05);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        color: white;
                        font-size: 14px;
                        }

                        .chat-input:focus {
                        outline: none;
                        border-color: var(--daena-gold);
                        }

                        .send-btn {
                        padding: 12px 20px;
                        border-radius: 10px;
                        background: var(--daena-gold);
                        color: black;
                        font-weight: 600;
                        border: none;
                        cursor: pointer;
                        }

                        .capability-list {
                        display: flex;
                        flex-wrap: wrap;
                        gap: 8px;
                        }

                        .capability-tag {
                        padding: 6px 12px;
                        background: rgba(255, 255, 255, 0.05);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        border-radius: 20px;
                        font-size: 12px;
                        color: #9CA3AF;
                        }

                        .glass-btn {
                        background: rgba(255, 255, 255, 0.05);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                        cursor: pointer;
                        transition: all 0.3s;
                        }

                        .glass-btn:hover {
                        background: rgba(212, 175, 55, 0.1);
                        border-color: var(--daena-gold);
                        }

                        @media (max-width: 900px) {
                        .content-grid {
                        grid-template-columns: 1fr;
                        }

                        .stats-grid {
                        grid-template-columns: repeat(2, 1fr);
                        }
                        }
                        </style>
                        {% endblock %}

                        {% block content %}
                        <div class="agent-container">
                            <div class="agent-header">
                                <a href="/ui/agents" class="back-btn"><i class="fas fa-arrow-left"></i></a>
                                <div class="agent-avatar" id="agent-avatar" style="background: #4169E1;">AC</div>
                                <div class="agent-info">
                                    <h1 id="agent-name">Alex CodeMaster</h1>
                                    <div class="agent-role" id="agent-role">Advisor A</div>
                                    <div class="agent-dept" id="agent-dept">Engineering Department</div>
                                </div>
                                <div class="status-badge online" id="agent-status">
                                    <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                                    Online
                                </div>
                            </div>

                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="stat-value" style="color: #32CD32;" id="efficiency">96.50%</div>
                                    <div class="stat-label">Efficiency</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" id="tasks-completed">127</div>
                                    <div class="stat-label">Tasks Done</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" style="color: #00CED1;" id="response-time">0.85s</div>
                                    <div class="stat-label">Avg Response</div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-value" style="color: var(--daena-gold);" id="uptime">99.80%</div>
                                    <div class="stat-label">Uptime</div>
                                </div>
                            </div>

                            <div class="content-grid">
                                <div class="card">
                                    <div class="card-title">Recent Tasks</div>
                                    <div class="task-list" id="task-list">
                                        <div class="task-item">
                                            <div class="task-status completed"></div>
                                            <div class="task-info">
                                                <div class="task-name">Review code PR #1247</div>
                                                <div class="task-time">Completed 2 hours ago</div>
                                            </div>
                                        </div>
                                        <div class="task-item">
                                            <div class="task-status in-progress"></div>
                                            <div class="task-info">
                                                <div class="task-name">Debug authentication issue</div>
                                                <div class="task-time">In progress - 45 min</div>
                                            </div>
                                        </div>
                                        <div class="task-item">
                                            <div class="task-status pending"></div>
                                            <div class="task-info">
                                                <div class="task-name">Update API documentation</div>
                                                <div class="task-time">Queued</div>
                                            </div>
                                        </div>
                                        <div class="task-item">
                                            <div class="task-status completed"></div>
                                            <div class="task-info">
                                                <div class="task-name">Deploy v2.3.1 to staging</div>
                                                <div class="task-time">Completed 5 hours ago</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div style="display: flex; flex-direction: column; gap: 24px;">
                                    <div class="card">
                                        <div class="card-title">Chat with Agent</div>
                                        <div id="agent-chat"
                                            style="min-height: 150px; max-height: 200px; overflow-y: auto; margin-bottom: 10px;">
                                            <p style="color: #9CA3AF; font-size: 13px;">Send a message to communicate
                                                directly with this agent.
                                            </p>
                                        </div>
                                        <div class="chat-input-area">
                                            <input type="text" class="chat-input" id="agent-message"
                                                placeholder="Ask the agent...">
                                            <button class="send-btn" onclick="sendAgentMessage()"><i
                                                    class="fas fa-paper-plane"></i></button>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-title">Capabilities</div>
                                        <div class="capability-list" id="capability-list">
                                            <span class="capability-tag">Code Review</span>
                                            <span class="capability-tag">Architecture Design</span>
                                            <span class="capability-tag">Bug Analysis</span>
                                            <span class="capability-tag">Performance Optimization</span>
                                            <span class="capability-tag">API Development</span>
                                            <span class="capability-tag">Testing</span>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-title">Quick Actions</div>
                                        <div style="display: flex; flex-direction: column; gap: 8px;">
                                            <button class="glass-btn" onclick="assignNewTask()"
                                                style="padding: 10px; border-radius: 8px; color: white; text-align: left;">
                                                <i class="fas fa-play text-green-400 mr-2"></i> Assign New Task
                                            </button>
                                            <button class="glass-btn" onclick="viewPerformance()"
                                                style="padding: 10px; border-radius: 8px; color: white; text-align: left;">
                                                <i class="fas fa-chart-line text-blue-400 mr-2"></i> View Performance
                                            </button>
                                            <button class="glass-btn" onclick="configureAgent()"
                                                style="padding: 10px; border-radius: 8px; color: white; text-align: left;">
                                                <i class="fas fa-cog text-gray-400 mr-2"></i> Configure Agent
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Task Assignment Modal -->
                            <div id="task-modal"
                                style="display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.8); z-index: 1000; align-items: center; justify-content: center;">
                                <div
                                    style="background: #111827; border: 1px solid rgba(255,255,255,0.1); border-radius: 16px; padding: 24px; width: 90%; max-width: 500px;">
                                    <h2 style="color: white; font-size: 20px; font-weight: 700; margin-bottom: 20px;">
                                        Assign New Task</h2>
                                    <div style="margin-bottom: 16px;">
                                        <label
                                            style="display: block; color: #9CA3AF; font-size: 13px; margin-bottom: 8px;">Task
                                            Name</label>
                                        <input type="text" id="new-task-name"
                                            style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white; font-size: 14px;"
                                            placeholder="Enter task name...">
                                    </div>
                                    <div style="margin-bottom: 24px;">
                                        <label
                                            style="display: block; color: #9CA3AF; font-size: 13px; margin-bottom: 8px;">Description
                                            (Optional)</label>
                                        <textarea id="new-task-desc" rows="3"
                                            style="width: 100%; padding: 12px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 8px; color: white; font-size: 14px; resize: vertical;"
                                            placeholder="Enter task details..."></textarea>
                                    </div>
                                    <div style="display: flex; justify-content: flex-end; gap: 12px;">
                                        <button onclick="closeTaskModal()"
                                            style="padding: 10px 20px; background: rgba(255,255,255,0.1); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Cancel</button>
                                        <button onclick="submitNewTask()"
                                            style="padding: 10px 20px; background: var(--daena-gold); color: black; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Assign
                                            Task</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endblock %}

                        {% block scripts %}
                        <script src="/static/js/agent_detail.js"></script>
                        {% endblock %}